!function(){"use strict";window.pinegladePP={breakpoints:[1200]},(()=>{if(!window)return;const e="pineglade-pp",t=[320,768,1260],s="pixelperfect",i="jpg",o=(e,t)=>e-t;document.head.insertAdjacentHTML("beforeend",'<style>.pineglade-pp{position:relative;overflow-x:hidden}.pineglade-pp::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1000000;background-image:var(--pp-img);background-repeat:no-repeat;background-position:50% 0;transform:translate(var(--pp-offset-x),var(--pp-offset-y));opacity:.5;filter:var(--pp-filter);pointer-events:none}</style>'),new class{constructor(){const{page:e=null,breakpoints:n=null,folder:r=s,ext:a=i}=window.pinegladePP||{};if(this._isPP=Boolean(Number(localStorage.getItem("pp")||0)),this._isInvert=Boolean(Number(localStorage.getItem("ppInvert")||1)),this._breakpoints=n?Array.from(new Set(n)).sort(o):t,this._currentBreakpoint=0,this._folder=r,this._ext=a,e)this._page=e;else{const[,e=null]=window.location.pathname.match(/^\/?(.*?)(\.html?)?$/)||[];this._page=e||"index"}if(this._offsets=JSON.parse(localStorage.getItem("ppOffsets"))||{},!this._offsets[this._page]){this._offsets[this._page]={};for(const e of this._breakpoints)this._offsets[this._page][e]=[0,0];this._saveOffsets()}this._keydownHandler=this._keydownHandler.bind(this),this._changeScreenMode=this._changeScreenMode.bind(this),this._changeScreenMode(),this._setOffsets(),this._managePP(),this._manageInvert(),window.addEventListener("resize",this._changeScreenMode),document.addEventListener("keydown",this._keydownHandler)}_changeScreenMode(){const{clientWidth:e}=document.body;let t=0;for(const s of this._breakpoints)e>=s&&(t=s);this._currentBreakpoint!==t&&(this._currentBreakpoint=t,this._setBgProperty(this._currentBreakpoint),this._setOffsets())}_keydownHandler(e){document.activeElement===document.body&&("KeyP"===e.code?(e.preventDefault(),this._isPP=!this._isPP,this._managePP()):this._isPP&&"KeyI"===e.code?(this._isInvert=!this._isInvert,this._manageInvert()):this._isPP&&"ArrowUp"===e.code?(e.preventDefault(),this._movePP(0,-1)):this._isPP&&"ArrowDown"===e.code?(e.preventDefault(),this._movePP(0,1)):this._isPP&&"ArrowLeft"===e.code?(e.preventDefault(),this._movePP(-1,0)):this._isPP&&"ArrowRight"===e.code&&(e.preventDefault(),this._movePP(1,0)))}_managePP(){this._isPP?document.body.classList.add(e):document.body.classList.remove(e),localStorage.setItem("pp",Number(this._isPP))}_manageInvert(){document.body.style.setProperty("--pp-filter",this._isInvert?"invert(1)":"none"),localStorage.setItem("ppInvert",Number(this._isInvert))}_movePP(e,t){this._offsets[this._page][this._currentBreakpoint][0]+=e,this._offsets[this._page][this._currentBreakpoint][1]+=t,this._saveOffsets(),this._setOffsets()}_saveOffsets(){localStorage.setItem("ppOffsets",JSON.stringify(this._offsets))}_setBgProperty(e=0){const t=e?`url(${this._folder}/${this._page}-${e}.${this._ext})`:"none";document.body.style.setProperty("--pp-img",t)}_setOffsets(){const[e=0,t=0]=this._offsets[this._page][this._currentBreakpoint]||[];document.body.style.setProperty("--pp-offset-x",`${e}px`),document.body.style.setProperty("--pp-offset-y",`${t}px`)}}})()}();